<!DOCTYPE html><html class="theme-next muse use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>!function(e,t,o,a,c,i,n){e.DaoVoiceObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,i=t.createElement(o),n=t.getElementsByTagName(o)[0],i.async=1,i.src=a,i.charset="utf-8",n.parentNode.insertBefore(i,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"1a63401a"}),daovoice("update")</script><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.0"><link rel="mask-icon" href="/images/logo.svg?v=6.4.0" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"6.4.0",sidebar:{position:"left",display:"hide",offset:12,b2t:!1,scrollpercent:!0,onmobile:!0},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="本文整理自：http://xiongdaxia.cn/2018/03/28/interview/"><meta name="keywords" content="面试题,思考题"><meta property="og:type" content="article"><meta property="og:title" content="熊大虾的题"><meta property="og:url" content="https://www.keenlee.net/2019/04/10/熊大虾的题/index.html"><meta property="og:site_name" content="神圣的小白菜"><meta property="og:description" content="本文整理自：http://xiongdaxia.cn/2018/03/28/interview/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2019-04-10T08:24:52.579Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="熊大虾的题"><meta name="twitter:description" content="本文整理自：http://xiongdaxia.cn/2018/03/28/interview/"><link rel="alternate" href="/atom.xml" title="神圣的小白菜" type="application/atom+xml"><link rel="canonical" href="https://www.keenlee.net/2019/04/10/熊大虾的题/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>熊大虾的题 | 神圣的小白菜</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?ad2ad2dfb3fb60f033fcb08726077f82";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div> <a href="https://github.com/johnleeeee" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">神圣的小白菜</span><span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"> <button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益 404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.keenlee.net/2019/04/10/熊大虾的题/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="神圣的小白菜"><meta itemprop="description" content="kepp moving！！！"><meta itemprop="image" content="http://wx4.sinaimg.cn/small/005AqIfAgy1ftzz80aweuj30k00k0jso.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="神圣的小白菜"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">熊大虾的题</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-04-10 15:23:53 / 修改时间：16:24:52" itemprop="dateCreated datePublished" datetime="2019-04-10T15:23:53+08:00">2019-04-10</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/面试/" itemprop="url" rel="index"><span itemprop="name">面试</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <a href="/2019/04/10/熊大虾的题/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span><span class="post-comments-count valine-comment-count" data-xid="/2019/04/10/熊大虾的题/" itemprop="commentCount"></span></a></span> <span id="/2019/04/10/熊大虾的题/" class="leancloud_visitors" data-flag-title="熊大虾的题"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span> <span>℃</span></span><br><div class="theme-info"><div class="powered-by"></div><span class="post-meta-item-icon"><i class="fa fa-file-word-o" aria-hidden="true"></i></span> <span>字数统计：</span> <span title="post.wordcount">2,496 字</span></div><div class="theme-info"><div class="powered-by"></div> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o" aria-hidden="true"></i></span> <span>阅读时长≈</span> <span title="post.min2read">10 分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><p>本文整理自：<a href="http://xiongdaxia.cn/2018/03/28/interview/" target="_blank" rel="noopener">http://xiongdaxia.cn/2018/03/28/interview/</a></p><a id="more"></a><h2 id="一-基础篇"><a href="#一-基础篇" class="headerlink" title="一 基础篇"></a>一 基础篇</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ol><li>面向对象的特征</li><li>final, finally, finalize 的区别</li><li>int 和 Integer 有什么区别</li><li>重载和重写的区别</li><li>抽象类和接口有什么区别</li><li>说说java反射的用途及实现</li><li>说说自定义注解的场景及实现</li><li>HTTP 请求的 GET 与 POST 方式的区别</li><li>session 与 cookie 区别</li><li>session 分布式处理</li><li>JDBC 流程</li><li>MVC 设计思想</li><li>equals 与 == 的区别</li><li>强引用 、软引用、 弱引用、虚引用</li><li>cloneable接口实现原理</li><li>异常分类以及处理机制</li><li>数组在内存中如何分配</li></ol><h3 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h3><ol><li>List 和 Set 区别</li><li>HashSet 是如何保证不重复的</li><li>List 和 Map 区别</li><li>Arraylist 与 LinkedList 区别</li><li>ArrayList 与 Vector 区别</li><li>HashMap 和 Hashtable 的区别</li><li>HashSet 和 HashMap 区别</li><li>HashMap 和 ConcurrentHashMap 的区别</li><li>HashMap 的工作原理及代码实现</li><li>HashMap 是线程安全的吗，为什么不是线程安全的（最好画图说明多线程环境下不安全）</li><li>HashMap 的扩容过程</li><li>HashMap 1.7 与 1.8 的 区别，说明 1.8 做了哪些优化，如何优化的？</li><li>ConcurrentHashMap 的工作原理及代码实现，1.8 中为什么要用红黑树</li><li>LinkedHashMap的应用</li><li>Arrays.sort 实现原理和 Collection 实现原理</li></ol><h3 id="JAVA并发"><a href="#JAVA并发" class="headerlink" title="JAVA并发"></a>JAVA并发</h3><ol><li>创建线程的方式及实现</li><li>sleep() 、join（）、yield（）有什么区别</li><li>说说 CountDownLatch 原理</li><li>说说 CyclicBarrier 原理</li><li>说说 Semaphore 原理</li><li>说说 Exchanger 原理</li><li>说说 CountDownLatch 与 CyclicBarrier 区别</li><li>ThreadLocal 原理分析，用的时候需要注意什么？</li><li>如何保证多线程下 i++ 结果正确？</li><li>线程的生命周期</li><li>wait和sleep的区别</li><li>说说线程安全问题</li><li>volatile 实现原理</li><li>Java 的信号灯？</li><li>synchronized 的实现原理以及锁优化？</li><li>synchronized 在静态方法和普通方法的区别？</li><li>怎么实现所有线程在等待某个事件的发生才会去执行？</li><li>AQS</li><li>CAS？CAS 有什么缺陷，如何解决？</li><li>synchronized 和 lock 有什么区别？</li><li>CAS 乐观锁</li><li>ABA 问题</li><li>Hashtable 是怎么加锁的 ？</li><li>HashMap 的并发问题？</li><li>乐观锁的业务场景及实现方式</li><li>如何检测死锁？怎么预防死锁？</li><li>Java 内存模型？</li><li>线程池的种类，区别，几种方式与使用场景</li><li>分析线程池的实现原理和线程的调度过程</li><li>线程池如何调优，最大数目如何确认？</li><li>CountDownLatch 和 CyclicBarrier 的用法，以及相互之间的差别?</li><li>LockSupport工具</li><li>Condition接口及其实现原理</li><li>Fork/Join框架的理解</li><li>分段锁的原理,锁力度减小的思考</li><li>八种阻塞队列以及各个阻塞队列的特性</li></ol><h2 id="二-核心篇"><a href="#二-核心篇" class="headerlink" title="二 核心篇"></a>二 核心篇</h2><h3 id="数据存储"><a href="#数据存储" class="headerlink" title="数据存储"></a>数据存储</h3><ol><li>mysql分页有什么优化</li><li>悲观锁、乐观锁</li><li>组合索引，最左原则</li><li>mysql 的表锁、行锁</li><li>mysql 性能优化</li><li>mysql的索引分类：B+，hash；什么情况用什么索引</li><li>事务的特性和隔离级别</li><li>MySQL 索引使用的注意事项</li><li>说说反模式设计</li><li>说说分库与分表设计</li><li>分库与分表带来的分布式困境与应对之策</li><li>说说 SQL 优化之道</li><li>MySQL 遇到的死锁问题</li><li>存储引擎的 InnoDB 与 MyISAM</li><li>数据库索引的原理</li><li>为什么要用 B-tree</li><li>聚集索引与非聚集索引的区别</li><li>limit 20000 加载很慢怎么解决</li><li>选择合适的分布式主键方案</li><li>选择合适的数据存储方案</li><li>ObjectId 规则</li><li>聊聊 MongoDB 使用场景</li><li>倒排索引</li><li>聊聊 ElasticSearch 使用场景</li></ol><h3 id="缓存使用"><a href="#缓存使用" class="headerlink" title="缓存使用"></a>缓存使用</h3><ol><li>Redis 有哪些类型，以及Redis底层怎么实现</li><li>Redis 内部结构</li><li>Redis 内存淘汰机制</li><li>Redis的数据淘汰策略</li><li>聊聊 Redis 使用场景</li><li>Redis 持久化机制的几种方式，优缺点是什么，怎么实现的</li><li>Redis 集群方案与实现</li><li>Redis缓存分片</li><li>缓存降级</li><li>使用缓存的合理性问题</li><li>Redis缓存穿透，缓存雪崩</li><li>如何使用Redis来实现分布式锁</li><li>Redis 为什么是单线程的</li><li>Redis的并发竞争问题如何解决</li><li>Redis的缓存失效策略</li><li>Redis集群，高可用，原理</li></ol><h3 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h3><ol><li>详细jvm内存模型</li><li>讲讲什么情况下回出现内存溢出，内存泄漏？</li><li>说说Java线程栈</li><li>JVM 年轻代到年老代的晋升过程的判断条件是什么呢？</li><li>JVM 出现 fullGC 很频繁，怎么去线上排查问题？</li><li>类加载为什么要使用双亲委派模式，有没有什么场景是打破了这个模式？</li><li>类的实例化顺序</li><li>JVM垃圾回收机制，何时触发MinorGC等操作</li><li>JVM 中一次完整的 GC 流程（从 ygc 到 fgc）是怎样的</li><li>各种回收器，各自优缺点，重点CMS、G1</li><li>各种回收算法</li><li>OOM错误，stackoverflow错误，permgen space错误</li></ol><h3 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h3><ol><li>消息队列的使用场景</li><li>消息的重发补偿解决思路</li><li>消息的幂等性解决思路</li><li>消息的堆积解决思路</li><li>自己如何实现消息队列</li><li>如何保证消息的有序性</li></ol><h2 id="三-框架篇"><a href="#三-框架篇" class="headerlink" title="三 框架篇"></a>三 框架篇</h2><h3 id="SPRING"><a href="#SPRING" class="headerlink" title="SPRING"></a>SPRING</h3><ol><li>BeanFactory 和 FactoryBean？</li><li>BeanFactory 和 ApplicationContext 有什么区别</li><li>Spring Bean 的生命周期，如何被管理的？</li><li>Spring Bean 的加载过程是怎样的？</li><li>Spring IOC 的理解，其初始化过程？如何实现？</li><li>如果要你实现Spring IOC，你会注意哪些问题？</li><li>说说 Spring AOP，Spring AOP 实现原理</li><li>如果要你实现Spring AOP，请问怎么实现？</li><li>Spring AOP的理解，各个术语，他们是怎么相互工作的？</li><li>Spring 是如何管理事务的，事务管理机制？事务实现方式？事务底层原理？</li><li>Spring 的不同事务传播行为有哪些，干什么用的？</li><li>动态代理（cglib 与 JDK）</li><li>如何自定义注解实现功能</li><li>Spring MVC 的工作原理？</li><li>Spring 循环注入的原理？</li><li>Spring MVC 运行流程</li><li>Spring MVC 启动流程</li><li>Spring 如何保证 Controller 并发的安全？</li><li>Spring 的单例实现原理</li><li>Spring 框架中用到了哪些设计模式</li><li>Spring 其他产品（Srping Boot、Spring Cloud、Spring Secuirity、Spring Data、Spring AMQP 等）</li></ol><h3 id="NETTY"><a href="#NETTY" class="headerlink" title="NETTY"></a>NETTY</h3><ol><li>为什么选择 Netty，说说业务中，Netty 的使用场景</li><li>Netty的高性能表现在哪些方面</li><li>BIO、NIO和AIO</li><li>Netty 的各大组件</li><li>原生的 NIO 在 JDK 1.7 版本存在 epoll bug</li><li>什么是TCP 粘包/拆包，TCP 粘包/拆包的原因及解决方法</li><li>Netty 线程模型</li><li>了解哪几种序列化协议？包括使用场景和如何去选择</li><li>说说 Netty 的零拷贝，实现</li><li>Netty 内部执行流程</li><li>Netty 重连实现</li></ol><h2 id="四-微服务篇"><a href="#四-微服务篇" class="headerlink" title="四 微服务篇"></a>四 微服务篇</h2><h3 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h3><ol><li>前后端分离是如何做的</li><li>如何解决跨域</li><li>微服务哪些框架</li><li>你怎么理解 RPC 框架</li><li>说说 RPC 的实现原理</li><li>Dubbo的底层实现原理和机制</li><li>描述一个服务从发布到被消费的详细过程</li><li>分布式系统怎么做服务治理</li><li>接口的幂等性的概念</li><li>消息中间件如何解决消息丢失问题</li><li>Dubbo的服务请求失败怎么处理</li><li>重连机制会不会造成错误</li><li>对分布式事务的理解</li><li>如何实现负载均衡，有哪些算法可以实现？</li><li>Zookeeper的用途，选举的原理是什么？</li><li>数据的垂直拆分水平拆分</li><li>zookeeper原理和适用场景</li><li>zookeeper watch机制</li><li>redis/zk节点宕机如何处理</li><li>分布式集群下如何做到唯一序列号</li><li>如何做一个分布式锁</li><li>用过哪些MQ，怎么用的，和其他mq比较有什么优缺点，MQ的连接是线程安全的吗</li><li>MQ系统的数据如何保证不丢失</li><li>列举出你能想到的数据库分库分表策略；分库分表后，如何解决全表查询的问题</li><li>zookeeper的选举策略</li><li>全局ID</li><li>你怎么理解 RESTful</li><li>说说如何设计一个良好的 API</li><li>如何理解 RESTful API 的幂等性</li><li>如何保证接口的幂等性</li><li>说说 CAP 定理、 BASE 理论</li><li>怎么考虑数据一致性问题</li><li>说说最终一致性的实现方案</li><li>你怎么看待微服务</li><li>微服务与 SOA 的区别</li><li>如何拆分服务</li><li>微服务如何进行数据库管理</li><li>如何应对微服务的链式调用异常</li><li>对于快速追踪与定位问题</li><li>微服务的安全</li></ol><h3 id="分布式"><a href="#分布式" class="headerlink" title="分布式"></a>分布式</h3><ol><li>谈谈业务中使用分布式的场景</li><li>Session 分布式方案</li><li>分布式锁的场景</li><li>分布是锁的实现方案</li><li>分布式事务</li><li>集群与负载均衡的算法与实现</li><li>说说分库与分表设计</li><li>分库与分表带来的分布式困境与应对之策</li></ol><h2 id="五-其他"><a href="#五-其他" class="headerlink" title="五 其他"></a>五 其他</h2><h3 id="安全问题"><a href="#安全问题" class="headerlink" title="安全问题"></a>安全问题</h3><ol><li>安全要素与 STRIDE 威胁</li><li>防范常见的 Web 攻击</li><li>服务端通信安全攻防</li><li>HTTPS 原理剖析</li><li>HTTPS 降级攻击</li><li>授权与认证</li><li>基于角色的访问控制</li><li>基于数据的访问控制</li></ol><h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><ol><li>性能指标有哪些</li><li>如何发现性能瓶颈</li><li>性能调优的常见手段</li><li>说说你在项目中如何进行性能调优</li></ol></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script><script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script><p><span>本文标题:</span><a href="/2019/04/10/熊大虾的题/">熊大虾的题</a></p><p><span>文章作者:</span><a href="/" title="访问 神圣的小白菜 的个人博客">神圣的小白菜</a></p><p><span>发布时间:</span>2019年04月10日 - 15:04</p><p><span>最后更新:</span>2019年04月10日 - 16:04</p><p><span>原始链接:</span><a href="/2019/04/10/熊大虾的题/" title="熊大虾的题">https://www.keenlee.net/2019/04/10/熊大虾的题/</a><span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://www.keenlee.net/2019/04/10/熊大虾的题/" aria-label="复制成功！"></i></span></p><p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p></div><script>var clipboard=new Clipboard(".fa-clipboard");$(".fa-clipboard").click(function(){clipboard.on("success",function(){swal({title:"",text:"复制成功",icon:"success",showConfirmButton:!0})})})</script></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'> <span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/images/wechatpay.jpg" alt="神圣的小白菜 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/images/alipay.jpg" alt="神圣的小白菜 支付宝"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/面试题/" rel="tag"><i class="fa fa-tag"></i> 面试题</a><a href="/tags/思考题/" rel="tag"><i class="fa fa-tag"></i> 思考题</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/01/04/记一次数据迁移/" rel="next" title="记一次数据迁移"><i class="fa fa-chevron-left"></i> 记一次数据迁移</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="http://wx4.sinaimg.cn/small/005AqIfAgy1ftzz80aweuj30k00k0jso.jpg" alt="神圣的小白菜"><p class="site-author-name" itemprop="name">神圣的小白菜</p><p class="site-description motion-element" itemprop="description">kepp moving！！！</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">24</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/johnleeeee" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="mailto:lzq_221@163.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span><span class="links-of-author-item"><a href="https://plus.google.com/yourname" target="_blank" title="Google"><i class="fa fa-fw fa-google"></i> Google</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="https://ackmeye.github.io/" title="AckmeYe" target="_blank">AckmeYe</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一-基础篇"><span class="nav-number">1.</span> <span class="nav-text">一 基础篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本概念"><span class="nav-number">1.1.</span> <span class="nav-text">基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合"><span class="nav-number">1.2.</span> <span class="nav-text">集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JAVA并发"><span class="nav-number">1.3.</span> <span class="nav-text">JAVA并发</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二-核心篇"><span class="nav-number">2.</span> <span class="nav-text">二 核心篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数据存储"><span class="nav-number">2.1.</span> <span class="nav-text">数据存储</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#缓存使用"><span class="nav-number">2.2.</span> <span class="nav-text">缓存使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JVM"><span class="nav-number">2.3.</span> <span class="nav-text">JVM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#消息队列"><span class="nav-number">2.4.</span> <span class="nav-text">消息队列</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三-框架篇"><span class="nav-number">3.</span> <span class="nav-text">三 框架篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SPRING"><span class="nav-number">3.1.</span> <span class="nav-text">SPRING</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NETTY"><span class="nav-number">3.2.</span> <span class="nav-text">NETTY</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四-微服务篇"><span class="nav-number">4.</span> <span class="nav-text">四 微服务篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#微服务"><span class="nav-number">4.1.</span> <span class="nav-text">微服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分布式"><span class="nav-number">4.2.</span> <span class="nav-text">分布式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五-其他"><span class="nav-number">5.</span> <span class="nav-text">五 其他</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安全问题"><span class="nav-number">5.1.</span> <span class="nav-text">安全问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#性能优化"><span class="nav-number">5.2.</span> <span class="nav-text">性能优化</span></a></li></ol></li></ol></div></div></section><div id="music163player"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="110" src="//music.163.com/outchain/player?type=0&id=2352798576&auto=0&height=90"></iframe></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-heartbeat"></i></span> <span class="author" itemprop="copyrightHolder">神圣的小白菜</span></div><div class="powered-by"><i class="fa fa-user-md"></i> <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span></div> <span class="post-meta-divider">|</span><div class="theme-info"><div class="powered-by"></div> <span class="post-count">博客全站共17.9k字</span></div><div id="days"></div><script language="javascript">function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("08/06/2018 00:00:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="已运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div><div><div class="addthis_inline_share_toolbox"><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b6eef773507fc5c" async="async"></script></div></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=6.4.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return-1<GUEST.indexOf(e)}),new Valine({el:"#comments",verify:!1,notify:!1,appId:"AvWprA9jad2CyyBeSyIHOgOp-gzGzoHsz",appKey:"Da3HETCuwSLhJpidnaWTU97t",placeholder:"ヾﾉ≧∀≦)o 来呀！快活呀！~",avatar:"mm",meta:guest,pageSize:"10",visitor:!1})</script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("AvWprA9jad2CyyBeSyIHOgOp-gzGzoHsz","Da3HETCuwSLhJpidnaWTU97t")</script><script>function showTime(e){var t=new AV.Query(e),c=[],u=$(".leancloud_visitors");u.each(function(){c.push($(this).attr("id").trim())}),t.containedIn("url",c),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var n=0;n<e.length;n++){var o=e[n],i=o.get("url"),s=o.get("time"),r=document.getElementById(i);$(r).find(t).text(s)}for(n=0;n<c.length;n++){i=c[n],r=document.getElementById(i);var l=$(r).find(t);""==l.text()&&l.text(0)}}else u.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(i){var e=$(".leancloud_visitors"),s=e.attr("id").trim(),r=e.attr("data-flag-title").trim(),t=new AV.Query(i);t.equalTo("url",s),t.find({success:function(e){if(0<e.length){var t=e[0];t.fetchWhenSave(!0),t.increment("time"),t.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var n=new i,o=new AV.ACL;o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),n.setACL(o),n.set("title",r),n.set("url",s),n.set("time",1),n.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):1<$(".post-title-link").length&&showTime(e)})</script><script type="text/javascript" src="/js/src/love.js"></script></body></html>